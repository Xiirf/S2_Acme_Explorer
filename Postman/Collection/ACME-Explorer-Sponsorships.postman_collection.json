{
	"info": {
		"_postman_id": "eb1d232e-bce8-4739-ab89-604c630ee7ba",
		"name": "ACME-Explorer-Sponsorships",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "GET  sponsorships",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "3a111f6c-e4ee-4838-802c-1b8f6ed4f0fb",
						"exec": [
							"const echoPostRequestManager = {",
							"    url: pm.environment.get('host') + '/actors',",
							"    method: 'POST',",
							"    header: {",
							"        'content-type': 'application/json',",
							"    },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            \"name\": \"Pedro\",",
							"            \"surname\": \"Borita\",",
							"            \"email\": \"t@t.com\",",
							"            \"phone\": \"0123456789\",",
							"            \"password\": \"pwd\",",
							"            \"adress\": \"algun lugar\",",
							"            \"role\": \"Manager\"",
							"        })",
							"    }",
							"};",
							"pm.sendRequest(echoPostRequestManager, function (err, res) {",
							"    console.log(err ? err : res.json());",
							"    if (err === null) {",
							"        pm.environment.set('lastManagerSubmittedId', res.json()._id)",
							"        const echoPostRequestTrip = {",
							"            url: pm.environment.get('host') + '/trips',",
							"            method: 'POST',",
							"            header: {",
							"                'content-type': 'application/json',",
							"            },",
							"            body: {",
							"                mode: 'raw',",
							"                raw: JSON.stringify({",
							"                    \"title\": \"testTitle\",",
							"                \t\"description\": \"testDescription\",",
							"                \t\"requirements\": [\"testRequirement\"],",
							"                \t\"start\": \"2020-02-12\",",
							"                \t\"end\": \"2020-02-28\",",
							"                \t\"stages\": [",
							"                \t\t{",
							"                \t\t\t\"title\": \"Paris\",",
							"                \t\t\t\"description\": \"Paris step\",",
							"                \t\t\t\"price\": 620",
							"                \t\t},",
							"                \t\t{",
							"                \t\t\t\"title\": \"Rouen\",",
							"                \t\t\t\"description\": \"Rouen step\",",
							"                \t\t\t\"price\": 380",
							"                \t\t}",
							"                \t],",
							"                \t\"managerId\": pm.environment.get('lastManagerSubmittedId')",
							"                })",
							"            }",
							"        };",
							"        pm.sendRequest(echoPostRequestTrip, function (err, res2) {",
							"            console.log(err ? err : res2.json());",
							"            if (err === null) {",
							"                pm.environment.set('lastTripSubmittedId', res2.json()._id)",
							"                const echoPostRequestActor = {",
							"                    url: pm.variables.get('host') + '/actors',",
							"                    method: 'POST',",
							"                    header: {",
							"                        'content-type': 'application/json',",
							"                    },",
							"                    body: {",
							"                        mode: 'raw',",
							"                        raw: JSON.stringify({",
							"                            \"name\": \"Antoño\",",
							"                            \"surname\": \"Banderas\",",
							"                            \"email\": \"f@f.com\",",
							"                            \"phone\": \"012459786\",",
							"                            \"password\": \"pwd\",",
							"                            \"adress\": \"algun lugar\",",
							"                            \"role\": \"Sponsor\"",
							"                        })",
							"                    }",
							"                };",
							"                pm.sendRequest(echoPostRequestActor, function (err, res3) {",
							"                    console.log(err ? err : res3.json());",
							"                        if (err === null) {",
							"                            pm.environment.set('lastActorSubmittedId', res3.json()._id)",
							"                        }",
							"                    const echoPostRequestSponsorship = {",
							"                        url: pm.variables.get('host') + '/sponsorships',",
							"                        method: 'POST',",
							"                        header: {",
							"                            'content-type': 'application/json',",
							"                        },",
							"                        body: {",
							"                            mode: 'raw',",
							"                            raw: JSON.stringify({",
							"                                \"banner\": [\"img\"],",
							"                                \"link\": \"github.com/\",",
							"                                \"trip_id\": pm.environment.get('lastTripSubmittedId'),",
							"                                \"sponsor_id\": res3.json()._id",
							"                            })",
							"                        }",
							"                    };",
							"                    pm.sendRequest(echoPostRequestSponsorship)",
							"                })",
							"            }",
							"        });",
							"    }",
							"});",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "9dc77a59-8e21-4734-9480-8cd14c900bf8",
						"exec": [
							"var Ajv = require('ajv'),",
							"    ajv = new Ajv({logger: console, allErrors: true}), schema = {",
							"    \"type\": \"object\",",
							"    \"required\": [\"_id\", \"banner\", \"email\", \"link\", \"tripId\", \"sponsorId\", \"payed\", \"createdAt\"],",
							"    \"properties\": {",
							"        \"properties\": {",
							"            \"_id\" : {",
							"                \"type\" : \"string\"",
							"            }, \"banner\" : {",
							"                 \"type\" : \"object\"",
							"            }, \"link\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"price\" : {",
							"                 \"type\" : \"float\"",
							"            }, \"tripId\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"sponsorId\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"payed\" : {",
							"                 \"type\" : \"boolean\"",
							"            }, \"createdAt\" : {",
							"                 \"format\": \"date\"",
							"            }, \"__v\" : {",
							"                 \"type\" : \"integer\"",
							"            }",
							"        }",
							"    }",
							"}",
							"",
							"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200) });",
							"/*pm.test(\"Return 1 item\", function () { pm.expect(pm.response.json().length).to.eql(1)});",
							"pm.test(\"Return the right item\", function () { pm.expect(pm.response.json()[0].link).to.eql(\"github.com/\") && pm.expect(pm.response.json()[0].sponsor_id).to.eql(pm.environment.get('lastActorSubmittedId'))});",
							"*/pm.test('Schema is valid', function() {",
							"  pm.expect(ajv.validate(pm.response.json()[0], schema), JSON.stringify(ajv.errors)).to.be.true;",
							"});",
							"const echoDeleteRequestActor = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastActorSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestManager = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastManagerSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestTrip= {",
							"  url: pm.variables.get('host') + '/trips/' + pm.environment.get('lastTripSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestSponsorship = {",
							"  url: pm.variables.get('host') + '/sponsorships/' + pm.response.json()[pm.response.json().length - 1]._id,",
							"  method: 'DELETE',",
							"};",
							"pm.sendRequest(echoDeleteRequestSponsorship);",
							"pm.sendRequest(echoDeleteRequestActor);",
							"pm.sendRequest(echoDeleteRequestTrip);",
							"pm.sendRequest(echoDeleteRequestManager);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{host}}/sponsorships",
					"host": [
						"{{host}}"
					],
					"path": [
						"sponsorships"
					]
				}
			},
			"response": []
		},
		{
			"name": "POST sponsorships",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "38ac690d-f62f-442a-86d2-b70b36a3da32",
						"exec": [
							"const echoPostRequestManager = {",
							"    url: pm.environment.get('host') + '/actors',",
							"    method: 'POST',",
							"    header: {",
							"        'content-type': 'application/json',",
							"    },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            \"name\": \"Pedro\",",
							"            \"surname\": \"Borita\",",
							"            \"email\": \"t@t.com\",",
							"            \"phone\": \"0123456789\",",
							"            \"password\": \"pwd\",",
							"            \"adress\": \"algun lugar\",",
							"            \"role\": \"Manager\"",
							"        })",
							"    }",
							"};",
							"pm.sendRequest(echoPostRequestManager, function (err, res) {",
							"    console.log(err ? err : res.json());",
							"    if (err === null) {",
							"        pm.environment.set('lastManagerSubmittedId', res.json()._id);",
							"        const echoPostRequestTrip = {",
							"            url: pm.environment.get('host') + '/trips',",
							"            method: 'POST',",
							"            header: {",
							"                'content-type': 'application/json',",
							"            },",
							"            body: {",
							"                mode: 'raw',",
							"                raw: JSON.stringify({",
							"                    \"title\": \"testTitle\",",
							"                \t\"description\": \"testDescription\",",
							"                \t\"requirements\": [\"testRequirement\"],",
							"                \t\"start\": \"2020-02-12\",",
							"                \t\"end\": \"2020-02-28\",",
							"                \t\"stages\": [",
							"                \t\t{",
							"                \t\t\t\"title\": \"Paris\",",
							"                \t\t\t\"description\": \"Paris step\",",
							"                \t\t\t\"price\": 620",
							"                \t\t},",
							"                \t\t{",
							"                \t\t\t\"title\": \"Rouen\",",
							"                \t\t\t\"description\": \"Rouen step\",",
							"                \t\t\t\"price\": 380",
							"                \t\t}",
							"                \t],",
							"                \t\"managerId\": pm.environment.get('lastManagerSubmittedId')",
							"                })",
							"            }",
							"        };",
							"        pm.sendRequest(echoPostRequestTrip, function (err, res2) {",
							"            console.log(err ? err : res2.json());",
							"            if (err === null) {",
							"                pm.environment.set('lastTripSubmittedId', res2.json()._id);",
							"                const echoPostRequestActor = {",
							"                    url: pm.variables.get('host') + '/actors',",
							"                    method: 'POST',",
							"                    header: {",
							"                        'content-type': 'application/json',",
							"                    },",
							"                    body: {",
							"                        mode: 'raw',",
							"                        raw: JSON.stringify({",
							"                            \"name\": \"Antoño\",",
							"                            \"surname\": \"Banderas\",",
							"                            \"email\": \"f@f.com\",",
							"                            \"phone\": \"012459786\",",
							"                            \"password\": \"pwd\",",
							"                            \"adress\": \"algun lugar\",",
							"                            \"role\": \"Sponsor\"",
							"                        })",
							"                    }",
							"                };",
							"                pm.sendRequest(echoPostRequestActor, function (err, res3) {",
							"                    console.log(err ? err : res3.json());",
							"                        if (err === null) {",
							"                            pm.environment.set('lastActorSubmittedId', res3.json()._id);",
							"                        }",
							"                });",
							"            }",
							"        });",
							"    }",
							"});"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "b78c3567-b7de-4071-b4f2-1f317f35b35b",
						"exec": [
							"var Ajv = require('ajv'),",
							"    ajv = new Ajv({logger: console, allErrors: true}), schema = {",
							"    \"type\": \"object\",",
							"    \"required\": [\"_id\", \"banner\", \"email\", \"link\", \"trip_id\", \"sponsor_id\", \"payed\", \"createdAt\"],",
							"    \"properties\": {",
							"        \"properties\": {",
							"            \"_id\" : {",
							"                \"type\" : \"string\"",
							"            }, \"banner\" : {",
							"                 \"type\" : \"object\"",
							"            }, \"link\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"price\" : {",
							"                 \"type\" : \"float\"",
							"            }, \"trip_id\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"sponsor_id\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"payed\" : {",
							"                 \"type\" : \"boolean\"",
							"            }, \"createdAt\" : {",
							"                 \"format\": \"date\"",
							"            }, \"__v\" : {",
							"                 \"type\" : \"integer\"",
							"            }",
							"        }",
							"    }",
							"}",
							"",
							"pm.test(\"Status code is 201\", function () { pm.expect(pm.response.code).to.be.oneOf([201]) });",
							"pm.test(\"Return the created item\", function () { pm.expect(pm.response.json().link).to.eql(\"github.com/\") && pm.expect(pm.response.json().sponsor_id).to.eql(pm.environment.get('lastActorSubmittedId'))});",
							"pm.test('Schema is valid', function() {",
							"  pm.expect(ajv.validate(pm.response.json(), schema), JSON.stringify(ajv.errors)).to.be.true;",
							"});",
							"const echoDeleteRequestActor = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastActorSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestManager = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastManagerSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestTrip= {",
							"  url: pm.variables.get('host') + '/trips/' + pm.environment.get('lastTripSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestSponsorship = {",
							"  url: pm.variables.get('host') + '/sponsorships/' + pm.response.json()._id,",
							"  method: 'DELETE',",
							"};",
							"pm.sendRequest(echoDeleteRequestSponsorship);",
							"pm.sendRequest(echoDeleteRequestActor);",
							"pm.sendRequest(echoDeleteRequestTrip);",
							"pm.sendRequest(echoDeleteRequestManager);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"banner\": [\"img\"],\n    \"link\": \"github.com/\",\n    \"trip_id\": \"{{lastTripSubmittedId}}\",\n    \"sponsor_id\": \"{{lastActorSubmittedId}}\"\n}"
				},
				"url": {
					"raw": "{{host}}/sponsorships",
					"host": [
						"{{host}}"
					],
					"path": [
						"sponsorships"
					]
				}
			},
			"response": []
		},
		{
			"name": "GET sponsorships id",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "2bae875c-574e-4ab1-a7b1-1e75817f438f",
						"exec": [
							"const echoPostRequestManager = {",
							"    url: pm.environment.get('host') + '/actors',",
							"    method: 'POST',",
							"    header: {",
							"        'content-type': 'application/json',",
							"    },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            \"name\": \"Pedro\",",
							"            \"surname\": \"Borita\",",
							"            \"email\": \"t@t.com\",",
							"            \"phone\": \"0123456789\",",
							"            \"password\": \"pwd\",",
							"            \"adress\": \"algun lugar\",",
							"            \"role\": \"Manager\"",
							"        })",
							"    }",
							"};",
							"pm.sendRequest(echoPostRequestManager, function (err, res) {",
							"    console.log(err ? err : res.json());",
							"    if (err === null) {",
							"        pm.environment.set('lastManagerSubmittedId', res.json()._id);",
							"        const echoPostRequestTrip = {",
							"            url: pm.environment.get('host') + '/trips',",
							"            method: 'POST',",
							"            header: {",
							"                'content-type': 'application/json',",
							"            },",
							"            body: {",
							"                mode: 'raw',",
							"                raw: JSON.stringify({",
							"                    \"title\": \"testTitle\",",
							"                \t\"description\": \"testDescription\",",
							"                \t\"requirements\": [\"testRequirement\"],",
							"                \t\"start\": \"2020-02-12\",",
							"                \t\"end\": \"2020-02-28\",",
							"                \t\"stages\": [",
							"                \t\t{",
							"                \t\t\t\"title\": \"Paris\",",
							"                \t\t\t\"description\": \"Paris step\",",
							"                \t\t\t\"price\": 620",
							"                \t\t},",
							"                \t\t{",
							"                \t\t\t\"title\": \"Rouen\",",
							"                \t\t\t\"description\": \"Rouen step\",",
							"                \t\t\t\"price\": 380",
							"                \t\t}",
							"                \t],",
							"                \t\"managerId\": pm.environment.get('lastManagerSubmittedId')",
							"                })",
							"            }",
							"        };",
							"        pm.sendRequest(echoPostRequestTrip, function (err, res2) {",
							"            console.log(err ? err : res2.json());",
							"            if (err === null) {",
							"                pm.environment.set('lastTripSubmittedId', res2.json()._id);",
							"                const echoPostRequestActor = {",
							"                    url: pm.variables.get('host') + '/actors',",
							"                    method: 'POST',",
							"                    header: {",
							"                        'content-type': 'application/json',",
							"                    },",
							"                    body: {",
							"                        mode: 'raw',",
							"                        raw: JSON.stringify({",
							"                            \"name\": \"Antoño\",",
							"                            \"surname\": \"Banderas\",",
							"                            \"email\": \"f@f.com\",",
							"                            \"phone\": \"012459786\",",
							"                            \"password\": \"pwd\",",
							"                            \"adress\": \"algun lugar\",",
							"                            \"role\": \"Sponsor\"",
							"                        })",
							"                    }",
							"                };",
							"                pm.sendRequest(echoPostRequestActor, function (err, res3) {",
							"                    console.log(err ? err : res3.json());",
							"                        if (err === null) {",
							"                            pm.environment.set('lastActorSubmittedId', res3.json()._id);",
							"                        }",
							"                    const echoPostRequestSponsorship = {",
							"                        url: pm.variables.get('host') + '/sponsorships',",
							"                        method: 'POST',",
							"                        header: {",
							"                            'content-type': 'application/json',",
							"                        },",
							"                        body: {",
							"                            mode: 'raw',",
							"                            raw: JSON.stringify({",
							"                                \"banner\": [\"img\"],",
							"                                \"link\": \"github.com/\",",
							"                                \"trip_id\": pm.environment.get('lastTripSubmittedId'),",
							"                                \"sponsor_id\": res3.json()._id",
							"                            })",
							"                        }",
							"                    };",
							"                    pm.sendRequest(echoPostRequestSponsorship, function (err, res4) {",
							"                        console.log(err ? err : res4.json());",
							"                        if (err === null) {",
							"                            pm.environment.set('lastSponsorshipSubmittedId', res4.json()._id);",
							"                        }",
							"                    });",
							"                });",
							"            }",
							"        });",
							"    }",
							"});",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "7d5db873-a168-4c03-af4c-68fcade1a139",
						"exec": [
							"var Ajv = require('ajv'),",
							"    ajv = new Ajv({logger: console, allErrors: true}), schema = {",
							"    \"type\": \"object\",",
							"    \"required\": [\"_id\", \"banner\", \"email\", \"link\", \"trip_id\", \"sponsor_id\", \"payed\", \"createdAt\"],",
							"    \"properties\": {",
							"        \"properties\": {",
							"            \"_id\" : {",
							"                \"type\" : \"string\"",
							"            }, \"banner\" : {",
							"                 \"type\" : \"object\"",
							"            }, \"link\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"price\" : {",
							"                 \"type\" : \"float\"",
							"            }, \"trip_id\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"sponsor_id\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"payed\" : {",
							"                 \"type\" : \"boolean\"",
							"            }, \"createdAt\" : {",
							"                 \"format\": \"date\"",
							"            }, \"__v\" : {",
							"                 \"type\" : \"integer\"",
							"            }",
							"        }",
							"    }",
							"}",
							"",
							"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200) });",
							"pm.test(\"Return the right item\", function () { pm.expect(pm.response.json().link).to.eql(\"github.com/\") && pm.expect(pm.response.json().sponsor_id).to.eql(pm.environment.get('lastActorSubmittedId'))});",
							"pm.test('Schema is valid', function() {",
							"  pm.expect(ajv.validate(pm.response.json(), schema), JSON.stringify(ajv.errors)).to.be.true;",
							"});",
							"const echoDeleteRequestActor = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastActorSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestManager = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastManagerSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestTrip= {",
							"  url: pm.variables.get('host') + '/trips/' + pm.environment.get('lastTripSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestSponsorship = {",
							"  url: pm.variables.get('host') + '/sponsorships/' + pm.response.json()._id,",
							"  method: 'DELETE',",
							"};",
							"pm.sendRequest(echoDeleteRequestSponsorship);",
							"pm.sendRequest(echoDeleteRequestActor);",
							"pm.sendRequest(echoDeleteRequestTrip);",
							"pm.sendRequest(echoDeleteRequestManager);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "text/plain",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{host}}/sponsorships/{{lastSponsorshipSubmittedId}}",
					"host": [
						"{{host}}"
					],
					"path": [
						"sponsorships",
						"{{lastSponsorshipSubmittedId}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "PUT sponsorships",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "f0e6bddd-18f0-475a-a406-fa3a3e537a3a",
						"exec": [
							"const echoPostRequestManager = {",
							"    url: pm.environment.get('host') + '/actors',",
							"    method: 'POST',",
							"    header: {",
							"        'content-type': 'application/json',",
							"    },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            \"name\": \"Pedro\",",
							"            \"surname\": \"Borita\",",
							"            \"email\": \"t@t.com\",",
							"            \"phone\": \"0123456789\",",
							"            \"password\": \"pwd\",",
							"            \"adress\": \"algun lugar\",",
							"            \"role\": \"Manager\"",
							"        })",
							"    }",
							"};",
							"pm.sendRequest(echoPostRequestManager, function (err, res) {",
							"    console.log(err ? err : res.json());",
							"    if (err === null) {",
							"        pm.environment.set('lastManagerSubmittedId', res.json()._id);",
							"        const echoPostRequestTrip = {",
							"            url: pm.environment.get('host') + '/trips',",
							"            method: 'POST',",
							"            header: {",
							"                'content-type': 'application/json',",
							"            },",
							"            body: {",
							"                mode: 'raw',",
							"                raw: JSON.stringify({",
							"                    \"title\": \"testTitle\",",
							"                \t\"description\": \"testDescription\",",
							"                \t\"requirements\": [\"testRequirement\"],",
							"                \t\"start\": \"2020-02-12\",",
							"                \t\"end\": \"2020-02-28\",",
							"                \t\"stages\": [",
							"                \t\t{",
							"                \t\t\t\"title\": \"Paris\",",
							"                \t\t\t\"description\": \"Paris step\",",
							"                \t\t\t\"price\": 620",
							"                \t\t},",
							"                \t\t{",
							"                \t\t\t\"title\": \"Rouen\",",
							"                \t\t\t\"description\": \"Rouen step\",",
							"                \t\t\t\"price\": 380",
							"                \t\t}",
							"                \t],",
							"                \t\"managerId\": pm.environment.get('lastManagerSubmittedId')",
							"                })",
							"            }",
							"        };",
							"        pm.sendRequest(echoPostRequestTrip, function (err, res2) {",
							"            console.log(err ? err : res2.json());",
							"            if (err === null) {",
							"                pm.environment.set('lastTripSubmittedId', res2.json()._id);",
							"                const echoPostRequestActor = {",
							"                    url: pm.variables.get('host') + '/actors',",
							"                    method: 'POST',",
							"                    header: {",
							"                        'content-type': 'application/json',",
							"                    },",
							"                    body: {",
							"                        mode: 'raw',",
							"                        raw: JSON.stringify({",
							"                            \"name\": \"Antoño\",",
							"                            \"surname\": \"Banderas\",",
							"                            \"email\": \"f@f.com\",",
							"                            \"phone\": \"012459786\",",
							"                            \"password\": \"pwd\",",
							"                            \"adress\": \"algun lugar\",",
							"                            \"role\": \"Sponsor\"",
							"                        })",
							"                    }",
							"                };",
							"                pm.sendRequest(echoPostRequestActor, function (err, res3) {",
							"                    console.log(err ? err : res3.json());",
							"                        if (err === null) {",
							"                            pm.environment.set('lastActorSubmittedId', res3.json()._id);",
							"                        }",
							"                    const echoPostRequestSponsorship = {",
							"                        url: pm.variables.get('host') + '/sponsorships',",
							"                        method: 'POST',",
							"                        header: {",
							"                            'content-type': 'application/json',",
							"                        },",
							"                        body: {",
							"                            mode: 'raw',",
							"                            raw: JSON.stringify({",
							"                                \"banner\": [\"img\"],",
							"                                \"link\": \"github.com/\",",
							"                                \"trip_id\": pm.environment.get('lastTripSubmittedId'),",
							"                                \"sponsor_id\": res3.json()._id",
							"                            })",
							"                        }",
							"                    };",
							"                    pm.sendRequest(echoPostRequestSponsorship, function (err, res4) {",
							"                        console.log(err ? err : res4.json());",
							"                        if (err === null) {",
							"                            pm.environment.set('lastSponsorshipSubmittedId', res4.json()._id);",
							"                        }",
							"                    });",
							"                });",
							"            }",
							"        });",
							"    }",
							"});",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "8c040501-c35e-4ee4-9f6d-a658574028d2",
						"exec": [
							"var Ajv = require('ajv'),",
							"    ajv = new Ajv({logger: console, allErrors: true}), schema = {",
							"    \"type\": \"object\",",
							"    \"required\": [\"_id\", \"banner\", \"email\", \"link\", \"trip_id\", \"sponsor_id\", \"payed\", \"createdAt\"],",
							"    \"properties\": {",
							"        \"properties\": {",
							"            \"_id\" : {",
							"                \"type\" : \"string\"",
							"            }, \"banner\" : {",
							"                 \"type\" : \"object\"",
							"            }, \"link\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"price\" : {",
							"                 \"type\" : \"float\"",
							"            }, \"trip_id\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"sponsor_id\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"payed\" : {",
							"                 \"type\" : \"boolean\"",
							"            }, \"createdAt\" : {",
							"                 \"format\": \"date\"",
							"            }, \"__v\" : {",
							"                 \"type\" : \"integer\"",
							"            }",
							"        }",
							"    }",
							"}",
							"",
							"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200) });",
							"pm.test(\"Return the right updated item\", function () { pm.expect(pm.response.json().price).to.eql(200) && pm.expect(pm.response.json().link).to.eql(\"google.com/\")});",
							"pm.test('Schema is valid', function() {",
							"  pm.expect(ajv.validate(pm.response.json(), schema), JSON.stringify(ajv.errors)).to.be.true;",
							"});",
							"const echoDeleteRequestActor = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastActorSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestManager = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastManagerSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestTrip= {",
							"  url: pm.variables.get('host') + '/trips/' + pm.environment.get('lastTripSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestSponsorship = {",
							"  url: pm.variables.get('host') + '/sponsorships/' + pm.response.json()._id,",
							"  method: 'DELETE',",
							"};",
							"pm.sendRequest(echoDeleteRequestSponsorship);",
							"pm.sendRequest(echoDeleteRequestActor);",
							"pm.sendRequest(echoDeleteRequestTrip);",
							"pm.sendRequest(echoDeleteRequestManager);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"banner\": {\n        \"0\": \"img\"\n    },\n    \"_id\": \"{{lastSponsorshipSubmittedId}}\",\n    \"payed\": false,\n    \"link\": \"google.com/\",\n    \"price\": 200,\n    \"trip_id\": \"{{lastTripSubmittedId}}\",\n    \"sponsor_id\": \"{{lastActorSubmittedId}}\",\n    \"createdAt\": \"2020-02-11T21:41:25.321Z\",\n    \"__v\": 0\n}"
				},
				"url": {
					"raw": "{{host}}/sponsorships/{{lastSponsorshipSubmittedId}}",
					"host": [
						"{{host}}"
					],
					"path": [
						"sponsorships",
						"{{lastSponsorshipSubmittedId}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "PATCH sponsorships pay",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "f0e6bddd-18f0-475a-a406-fa3a3e537a3a",
						"exec": [
							"const echoPostRequestManager = {",
							"    url: pm.environment.get('host') + '/actors',",
							"    method: 'POST',",
							"    header: {",
							"        'content-type': 'application/json',",
							"    },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            \"name\": \"Pedro\",",
							"            \"surname\": \"Borita\",",
							"            \"email\": \"t@t.com\",",
							"            \"phone\": \"0123456789\",",
							"            \"password\": \"pwd\",",
							"            \"adress\": \"algun lugar\",",
							"            \"role\": \"Manager\"",
							"        })",
							"    }",
							"};",
							"pm.sendRequest(echoPostRequestManager, function (err, res) {",
							"    console.log(err ? err : res.json());",
							"    if (err === null) {",
							"        pm.environment.set('lastManagerSubmittedId', res.json()._id);",
							"        const echoPostRequestTrip = {",
							"            url: pm.environment.get('host') + '/trips',",
							"            method: 'POST',",
							"            header: {",
							"                'content-type': 'application/json',",
							"            },",
							"            body: {",
							"                mode: 'raw',",
							"                raw: JSON.stringify({",
							"                    \"title\": \"testTitle\",",
							"                \t\"description\": \"testDescription\",",
							"                \t\"requirements\": [\"testRequirement\"],",
							"                \t\"start\": \"2020-02-12\",",
							"                \t\"end\": \"2020-02-28\",",
							"                \t\"stages\": [",
							"                \t\t{",
							"                \t\t\t\"title\": \"Paris\",",
							"                \t\t\t\"description\": \"Paris step\",",
							"                \t\t\t\"price\": 620",
							"                \t\t},",
							"                \t\t{",
							"                \t\t\t\"title\": \"Rouen\",",
							"                \t\t\t\"description\": \"Rouen step\",",
							"                \t\t\t\"price\": 380",
							"                \t\t}",
							"                \t],",
							"                \t\"managerId\": pm.environment.get('lastManagerSubmittedId')",
							"                })",
							"            }",
							"        };",
							"        pm.sendRequest(echoPostRequestTrip, function (err, res2) {",
							"            console.log(err ? err : res2.json());",
							"            if (err === null) {",
							"                pm.environment.set('lastTripSubmittedId', res2.json()._id);",
							"                const echoPostRequestActor = {",
							"                    url: pm.variables.get('host') + '/actors',",
							"                    method: 'POST',",
							"                    header: {",
							"                        'content-type': 'application/json',",
							"                    },",
							"                    body: {",
							"                        mode: 'raw',",
							"                        raw: JSON.stringify({",
							"                            \"name\": \"Antoño\",",
							"                            \"surname\": \"Banderas\",",
							"                            \"email\": \"f@f.com\",",
							"                            \"phone\": \"012459786\",",
							"                            \"password\": \"pwd\",",
							"                            \"adress\": \"algun lugar\",",
							"                            \"role\": \"Sponsor\"",
							"                        })",
							"                    }",
							"                };",
							"                pm.sendRequest(echoPostRequestActor, function (err, res3) {",
							"                    console.log(err ? err : res3.json());",
							"                        if (err === null) {",
							"                            pm.environment.set('lastActorSubmittedId', res3.json()._id);",
							"                        }",
							"                    const echoPostRequestSponsorship = {",
							"                        url: pm.variables.get('host') + '/sponsorships',",
							"                        method: 'POST',",
							"                        header: {",
							"                            'content-type': 'application/json',",
							"                        },",
							"                        body: {",
							"                            mode: 'raw',",
							"                            raw: JSON.stringify({",
							"                                \"banner\": [\"img\"],",
							"                                \"link\": \"github.com/\",",
							"                                \"trip_id\": pm.environment.get('lastTripSubmittedId'),",
							"                                \"sponsor_id\": res3.json()._id",
							"                            })",
							"                        }",
							"                    };",
							"                    pm.sendRequest(echoPostRequestSponsorship, function (err, res4) {",
							"                        console.log(err ? err : res4.json());",
							"                        if (err === null) {",
							"                            pm.environment.set('lastSponsorshipSubmittedId', res4.json()._id);",
							"                        }",
							"                    });",
							"                });",
							"            }",
							"        });",
							"    }",
							"});",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "8c040501-c35e-4ee4-9f6d-a658574028d2",
						"exec": [
							"var Ajv = require('ajv'),",
							"    ajv = new Ajv({logger: console, allErrors: true}), schema = {",
							"    \"type\": \"object\",",
							"    \"required\": [\"_id\", \"banner\", \"email\", \"link\", \"trip_id\", \"sponsor_id\", \"payed\", \"createdAt\"],",
							"    \"properties\": {",
							"        \"properties\": {",
							"            \"_id\" : {",
							"                \"type\" : \"string\"",
							"            }, \"banner\" : {",
							"                 \"type\" : \"object\"",
							"            }, \"link\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"price\" : {",
							"                 \"type\" : \"float\"",
							"            }, \"trip_id\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"sponsor_id\" : {",
							"                 \"type\" : \"string\"",
							"            }, \"payed\" : {",
							"                 \"type\" : \"boolean\"",
							"            }, \"createdAt\" : {",
							"                 \"format\": \"date\"",
							"            }, \"__v\" : {",
							"                 \"type\" : \"integer\"",
							"            }",
							"        }",
							"    }",
							"}",
							"",
							"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200) });",
							"pm.test(\"Return the right updated item\", function () { pm.expect(pm.response.json().link).to.eql(\"github.com/\") && pm.expect(pm.response.json().payed).to.be.true});",
							"pm.test('Schema is valid', function() {",
							"  pm.expect(ajv.validate(pm.response.json(), schema), JSON.stringify(ajv.errors)).to.be.true;",
							"});",
							"const echoDeleteRequestActor = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastActorSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestManager = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastManagerSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestTrip= {",
							"  url: pm.variables.get('host') + '/trips/' + pm.environment.get('lastTripSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestSponsorship = {",
							"  url: pm.variables.get('host') + '/sponsorships/' + pm.response.json()._id,",
							"  method: 'DELETE',",
							"};",
							"pm.sendRequest(echoDeleteRequestSponsorship);",
							"pm.sendRequest(echoDeleteRequestActor);",
							"pm.sendRequest(echoDeleteRequestTrip);",
							"pm.sendRequest(echoDeleteRequestManager);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"payed\": true\n}"
				},
				"url": {
					"raw": "{{host}}/sponsorships/{{lastSponsorshipSubmittedId}}/pay",
					"host": [
						"{{host}}"
					],
					"path": [
						"sponsorships",
						"{{lastSponsorshipSubmittedId}}",
						"pay"
					]
				}
			},
			"response": []
		},
		{
			"name": "PATCH sponsorships flat rate",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "f0e6bddd-18f0-475a-a406-fa3a3e537a3a",
						"exec": [
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "8c040501-c35e-4ee4-9f6d-a658574028d2",
						"exec": [
							"var Ajv = require('ajv'),",
							"    ajv = new Ajv({logger: console, allErrors: true}), schema = {",
							"    \"type\": \"object\",",
							"    \"required\": [\"flatRateSponsorships\", \"cacheTimeOutFinderResults\", \"maxNumberFinderResults\", \"__v\"],",
							"    \"properties\": {",
							"        \"properties\": {",
							"            \"_id\" : {",
							"                \"type\" : \"string\"",
							"            },\"flatRateSponsorships\" : {",
							"                \"type\" : \"float\"",
							"            }, \"cacheTimeOutFinderResults\" : {",
							"                 \"type\" : \"integer\"",
							"            }, \"maxNumberFinderResults\" : {",
							"                 \"type\" : \"integer\"",
							"            }, \"__v\" : {",
							"                 \"type\" : \"integer\"",
							"            }",
							"        }",
							"    }",
							"}",
							"",
							"pm.test(\"Status code is 200\", function () { pm.response.to.have.status(200) });",
							"pm.test(\"Return the right updated item\", function () { pm.expect(pm.response.json().flatRateSponsorships).to.eql(10)});",
							"pm.test('Schema is valid', function() {",
							"  pm.expect(ajv.validate(pm.response.json(), schema), JSON.stringify(ajv.errors)).to.be.true;",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PATCH",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"flatRateSponsorships\": 10\n}"
				},
				"url": {
					"raw": "{{host}}/sponsorships/flatRate",
					"host": [
						"{{host}}"
					],
					"path": [
						"sponsorships",
						"flatRate"
					]
				}
			},
			"response": []
		},
		{
			"name": "DELETE sponsorships",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "260dd1a3-0457-4dbd-8fb6-b8dcfccef826",
						"exec": [
							"const echoPostRequestManager = {",
							"    url: pm.environment.get('host') + '/actors',",
							"    method: 'POST',",
							"    header: {",
							"        'content-type': 'application/json',",
							"    },",
							"    body: {",
							"        mode: 'raw',",
							"        raw: JSON.stringify({",
							"            \"name\": \"Pedro\",",
							"            \"surname\": \"Borita\",",
							"            \"email\": \"t@t.com\",",
							"            \"phone\": \"0123456789\",",
							"            \"password\": \"pwd\",",
							"            \"adress\": \"algun lugar\",",
							"            \"role\": \"Manager\"",
							"        })",
							"    }",
							"};",
							"pm.sendRequest(echoPostRequestManager, function (err, res) {",
							"    console.log(err ? err : res.json());",
							"    if (err === null) {",
							"        pm.environment.set('lastManagerSubmittedId', res.json()._id);",
							"        const echoPostRequestTrip = {",
							"            url: pm.environment.get('host') + '/trips',",
							"            method: 'POST',",
							"            header: {",
							"                'content-type': 'application/json',",
							"            },",
							"            body: {",
							"                mode: 'raw',",
							"                raw: JSON.stringify({",
							"                    \"title\": \"testTitle\",",
							"                \t\"description\": \"testDescription\",",
							"                \t\"requirements\": [\"testRequirement\"],",
							"                \t\"start\": \"2020-02-12\",",
							"                \t\"end\": \"2020-02-28\",",
							"                \t\"stages\": [",
							"                \t\t{",
							"                \t\t\t\"title\": \"Paris\",",
							"                \t\t\t\"description\": \"Paris step\",",
							"                \t\t\t\"price\": 620",
							"                \t\t},",
							"                \t\t{",
							"                \t\t\t\"title\": \"Rouen\",",
							"                \t\t\t\"description\": \"Rouen step\",",
							"                \t\t\t\"price\": 380",
							"                \t\t}",
							"                \t],",
							"                \t\"managerId\": pm.environment.get('lastManagerSubmittedId')",
							"                })",
							"            }",
							"        };",
							"        pm.sendRequest(echoPostRequestTrip, function (err, res2) {",
							"            console.log(err ? err : res2.json());",
							"            if (err === null) {",
							"                pm.environment.set('lastTripSubmittedId', res2.json()._id);",
							"                const echoPostRequestActor = {",
							"                    url: pm.variables.get('host') + '/actors',",
							"                    method: 'POST',",
							"                    header: {",
							"                        'content-type': 'application/json',",
							"                    },",
							"                    body: {",
							"                        mode: 'raw',",
							"                        raw: JSON.stringify({",
							"                            \"name\": \"Antoño\",",
							"                            \"surname\": \"Banderas\",",
							"                            \"email\": \"f@f.com\",",
							"                            \"phone\": \"012459786\",",
							"                            \"password\": \"pwd\",",
							"                            \"adress\": \"algun lugar\",",
							"                            \"role\": \"Sponsor\"",
							"                        })",
							"                    }",
							"                };",
							"                pm.sendRequest(echoPostRequestActor, function (err, res3) {",
							"                    console.log(err ? err : res3.json());",
							"                        if (err === null) {",
							"                            pm.environment.set('lastActorSubmittedId', res3.json()._id);",
							"                        }",
							"                    const echoPostRequestSponsorship = {",
							"                        url: pm.variables.get('host') + '/sponsorships',",
							"                        method: 'POST',",
							"                        header: {",
							"                            'content-type': 'application/json',",
							"                        },",
							"                        body: {",
							"                            mode: 'raw',",
							"                            raw: JSON.stringify({",
							"                                \"banner\": [\"img\"],",
							"                                \"link\": \"github.com/\",",
							"                                \"trip_id\": pm.environment.get('lastTripSubmittedId'),",
							"                                \"sponsor_id\": res3.json()._id",
							"                            })",
							"                        }",
							"                    };",
							"                    pm.sendRequest(echoPostRequestSponsorship, function (err, res4) {",
							"                        console.log(err ? err : res4.json());",
							"                        if (err === null) {",
							"                            pm.environment.set('lastSponsorshipSubmittedId', res4.json()._id);",
							"                        }",
							"                    });",
							"                });",
							"            }",
							"        });",
							"    }",
							"});",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "98a85a61-a056-4c29-93ea-e070c0f582f4",
						"exec": [
							"pm.test(\"Status code is 204\", function () { pm.response.to.have.status(204) });",
							"const echoDeleteRequestActor = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastActorSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestManager = {",
							"  url: pm.variables.get('host') + '/actors/' + pm.environment.get('lastManagerSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"const echoDeleteRequestTrip= {",
							"  url: pm.variables.get('host') + '/trips/' + pm.environment.get('lastTripSubmittedId'),",
							"  method: 'DELETE',",
							"};",
							"pm.sendRequest(echoDeleteRequestActor);",
							"pm.sendRequest(echoDeleteRequestTrip);",
							"pm.sendRequest(echoDeleteRequestManager);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{host}}/sponsorships/{{lastSponsorshipSubmittedId}}",
					"host": [
						"{{host}}"
					],
					"path": [
						"sponsorships",
						"{{lastSponsorshipSubmittedId}}"
					]
				}
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}